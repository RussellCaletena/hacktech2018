<!--Import template base.html layout-->
{% extends 'base.html' %}

<!DOCTYPE html>
<html>
  <head>
    {% block head %}
    <title>SELECT ITEMS</title>
    {% endblock %}
    <!--Needed for importing static files
    {% load static %}
     <link rel="stylesheet" href="{% static 'app_Transaction/style.css' %}" type="text/css">
    -->
  </head>
  <body>
    {% block body %}
    <div class="container">
      <div class="jumbotron">
        <h1>Select Items to Split</h1>
        <p class="lead">Hello, {{ userFirstName }}, please select the items you want to split.</p>
      </div>

      <button id="submitButton" class="btn btn-outline-success btn-lg btn-block" onclick="sendPostData()" type="submit">Clear All Selections</button>
      <br>
      <table class="table table-striped">
        <thead>
          <tr>
            <th scope="col">Assign</th>
            <th scope="col">Item Number</th>
            <th scope="col">Item Name</th>
            <th scope="col">Item Price</th>
          </tr>
        </thead>
        <form>
          {% csrf_token %}
        <tbody class="result" id="result">
          {% for number,name,price in item_list %}
              <tr>
              <td scope="row"><label><input type="checkbox" value=""></label></th>
              <th scope="row">{{ number }}</th>
              <td scope="row">{{ name }}</td>
              <td scope="row">{{ price }}</td>
              </tr>
          {% endfor %}
        </tbody>
      </form>
      </table>
    </div>
    <script type="text/javascript">
    "use strict";
    var outerObj = {};
    function addPartToOrder(_partName,_partQty,_partID)
    {
      var obj = {
        partName: _partName,
        partQty: _partQty,
        partID: _partID
      };
      console.log(obj);
      console.log(outerObj)
      outerObj[_partName] = obj;
    };



    function sendPostData() {
      // event.preventDefault();
      var partData = JSON.stringify(outerObj);
      console.log(partData);
      $.post("", {
        csrfmiddlewaretoken: document.getElementsByName('csrfmiddlewaretoken')[0].value,
        partData
      });
    };
    var sendPostDataEvent = document.getElementById("submitButton").addEventListener("click", sendPostData);
    </script>
    {% endblock %}
  </body>
</html>
